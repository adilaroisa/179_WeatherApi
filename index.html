<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuaca</title>

    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 500px;
            margin: auto;
            padding: 20px;
            border: 1px solid #000;
            border-radius: 8px;
        }
        h1, h2 {
            color: #000;
            text-align: center;
        }
        .input-group {
            margin-bottom: 15px;
            text-align: center;
        }
        .input-group input {
            padding: 8px;
            border: 1px solid #000;
            border-radius: 4px;
        }
        .input-group button {
            padding: 8px 12px;
            background-color: #eee;
            color: #000;
            border: 1px solid #000;
            border-radius: 4px;
            cursor: pointer;
        }
        .input-group button:hover {
            background-color: #ddd;
        }
        .info {
            margin-top: 20px;
        }
        .info p {
            margin: 5px 0;
        }
        .error-message {
            color: red;
        }
    </style>

</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <div class="container">
        <h1>Cuaca</h1>
        
        <div class="input-group">
            <label for="lokasiInput">Lokasi:</label>
            <input type="text" id="lokasiInput" placeholder="Contoh: Jakarta">
            <button id="cariButton">Cari</button>
        </div>

        <div id="loading" style="display:none; text-align: center;">Memuat data...</div>
        <div id="error" class="error-message" style="display:none; text-align: center;"></div>

        <div id="tampilan" class="info">
            </div>
    </div>

    <script>
        const apiKey = "6337b504a34d43138c465629250710";

        function getWeatherData(lokasi) {
            const urlapi = `http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${lokasi}&aqi=no`;
            
            $('#loading').show();
            $('#error').hide();
            $('#tampilan').empty();

            $.ajax({
                url: urlapi,
                method: "GET",
                success: function(data) {
                    $('#loading').hide();
                    
                    if (data.error) {
                         $('#error').text(`Gagal: ${data.error.message}`).show();
                         return;
                    }

                    const htmlContent = `
                        <h2>Cuaca</h2>
                        <p>Suhu (째C): ${data.current.temp_c}째C</p>
                        <p>Suhu (째F): ${data.current.temp_f}째F</p>
                        <p>Kelembapan: ${data.current.humidity}%</p>
                        
                        <hr>
                        <h2>Lokasi</h2>
                        <p>Negara: ${data.location.country}</p>
                        <p>Provinsi: ${data.location.region}</p>
                        <p>Kecamatan: ${data.location.name}</p>
                        <p>Longitude: ${data.location.lon}</p>
                        <p>Latitude: ${data.location.lat}</p>
                    `;
                    
                    $('#tampilan').html(htmlContent);
                },
                error: function(xhr, status, error) {
                    $('#loading').hide();
                    $('#error').text(`Terjadi kesalahan: ${error}`).show();
                },
            });
        }

        $('#cariButton').on('click', function() {
            const lokasi = $('#lokasiInput').val();
            if (lokasi) {
                getWeatherData(lokasi);
            } else {
                $('#error').text('Harap masukkan lokasi.').show();
            }
        });
    </script>

</body>
</html>